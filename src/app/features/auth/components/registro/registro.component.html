<div class="min-h-screen flex bg-gray-50">
  <div class="hidden lg:flex lg:w-1/2 bg-gradient-to-br from-blue-600 to-purple-700 relative overflow-hidden">
    <div class="absolute inset-0 bg-black/20"></div>
    
    <div class="absolute top-10 left-10 w-32 h-32 bg-white/10 rounded-full blur-2xl"></div>
    <div class="absolute bottom-32 right-16 w-40 h-40 bg-white/10 rounded-full blur-2xl"></div>
    <div class="absolute top-1/2 right-20 w-24 h-24 bg-white/10 rounded-full blur-2xl"></div>
    
    <div class="relative z-10 flex flex-col justify-center items-start p-12 text-white animate-slide-left">
      <div class="mb-8">
        <div class="inline-flex items-center gap-3 mb-6">
          <div class="p-3 bg-white/20 rounded-xl backdrop-blur-sm">
            <svg class="h-10 w-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
            </svg>
          </div>
          <div>
            <h1 class="text-3xl font-bold">Organigrama</h1>
            <p class="text-blue-100 text-lg">Plataforma Empresarial</p>
          </div>
        </div>
      </div>
      
      <div class="space-y-6 animate-slide-left-delay">
        <h2 class="text-4xl font-bold leading-tight">
          Únete a nuestra<br>
          <span class="text-blue-200">plataforma</span>
        </h2>
        <p class="text-xl text-blue-100 leading-relaxed max-w-md">
          Gestiona tu organización de manera eficiente y mantén un control total sobre la estructura empresarial.
        </p>
        
        <div class="flex items-center gap-4 pt-4">
          <div class="flex -space-x-2">
            <div class="w-10 h-10 bg-blue-400 rounded-full border-2 border-white"></div>
            <div class="w-10 h-10 bg-purple-400 rounded-full border-2 border-white"></div>
            <div class="w-10 h-10 bg-pink-400 rounded-full border-2 border-white"></div>
          </div>
          <p class="text-blue-100">+500 empresas confían en nosotros</p>
        </div>
      </div>
    </div>
    
    <div class="absolute top-20 right-20 w-16 h-16 bg-white/10 rounded-full blur-xl"></div>
    <div class="absolute bottom-20 left-20 w-24 h-24 bg-white/10 rounded-full blur-2xl"></div>
  </div>

  <div class="w-full lg:w-1/2 flex items-center justify-center p-8">
    <div class="w-full max-w-md space-y-8">
      <div class="lg:hidden text-center">
        <div class="inline-flex items-center gap-3 mb-6">
          <div class="p-2 bg-cyan-600/10 rounded-lg">
            <svg class="h-8 w-8 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
            </svg>
          </div>
          <div class="text-left">
            <h1 class="text-2xl font-bold text-gray-900">Organigrama</h1>
            <p class="text-gray-600 text-sm">Plataforma Empresarial</p>
          </div>
        </div>
      </div>

      <div class="text-center lg:text-left space-y-2">
        <h2 class="text-3xl font-bold text-gray-900">Crear Cuenta</h2>
        <p class="text-gray-600">
          Completa el formulario para registrarte en la plataforma
        </p>
      </div>

      <div class="bg-white border border-gray-200/50 rounded-lg shadow-lg">
        <div class="p-8">
          <form class="space-y-6" [formGroup]="formularioRegistro" (ngSubmit)="registro()">
            
            <div class="space-y-2">
              <p-float-label variant="on">
                <p-iconfield>
                  <p-inputicon class="pi pi-user" />
                  <input
                    type="text"
                    formControlName="userName"
                    id="user-name"
                    pInputText
                    class="w-full"
                    placeholder="Ingresa tu nombre de usuario"
                  />
                </p-iconfield>
                <label for="user-name">Nombre de Usuario</label>
              </p-float-label>

              @if(formularioRegistro.get('userName')?.invalid && formularioRegistro.get('userName')?.touched) {
                <div class="pt-2">
                  @if(formularioRegistro.get('userName')?.errors?.['required']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      El nombre de usuario es obligatorio
                    </p-message>
                  }
                  @if(formularioRegistro.get('userName')?.errors?.['minlength']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      El usuario debe tener al menos 3 caracteres
                    </p-message>
                  }
                  @if(formularioRegistro.get('userName')?.errors?.['maxlength']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      El usuario no puede exceder 50 caracteres
                    </p-message>
                  }
                  @if(formularioRegistro.get('userName')?.errors?.['username']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      Solo se permiten letras, números y guiones bajos
                    </p-message>
                  }
                  @if(formularioRegistro.get('userName')?.errors?.['noWhitespace']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      No se permiten espacios en blanco
                    </p-message>
                  }
                </div>
              }
            </div>

            <div class="space-y-2">
              <p-float-label variant="on">
                <p-password
                  [toggleMask]="true"
                  promptLabel="Ingresa tu contraseña"
                  formControlName="password"
                  id="password"
                  inputStyleClass="w-full"
                  class="w-full"
                  [feedback]="false"
                >
                </p-password>
                <label for="password">Contraseña</label>
              </p-float-label>

              @if(formularioRegistro.get('password')?.invalid && formularioRegistro.get('password')?.touched) {
                <div class="pt-2">
                  @if(formularioRegistro.get('password')?.errors?.['required']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      La contraseña es obligatoria
                    </p-message>
                  }
                  @if(formularioRegistro.get('password')?.errors?.['minlength']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      La contraseña debe tener al menos 6 caracteres
                    </p-message>
                  }
                  @if(formularioRegistro.get('password')?.errors?.['noWhitespace']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      No se permiten espacios en blanco
                    </p-message>
                  }
                </div>
              }
            </div>

            <div class="space-y-2">
              <p-float-label variant="on">
                <p-password
                  [toggleMask]="true"
                  promptLabel="Confirma tu contraseña"
                  formControlName="confirmPassword"
                  id="confirm-password"
                  inputStyleClass="w-full"
                  class="w-full"
                  [feedback]="false"
                >
                </p-password>
                <label for="confirm-password">Confirmar Contraseña</label>
              </p-float-label>

              @if(formularioRegistro.get('confirmPassword')?.invalid && formularioRegistro.get('confirmPassword')?.touched) {
                <div class="pt-2">
                  @if(formularioRegistro.get('confirmPassword')?.errors?.['required']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      Debes confirmar tu contraseña
                    </p-message>
                  }
                  @if(formularioRegistro.get('confirmPassword')?.errors?.['confirmPassword']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      Las contraseñas no coinciden
                    </p-message>
                  }
                </div>
              }
            </div>

            <!-- Campo Rol -->
            <div class="space-y-2">
              <p-float-label variant="on">
                <p-select
                  [options]="roles"
                  formControlName="rol"
                  id="rol"
                  placeholder="Selecciona un rol"
                  class="w-full"
                >
                </p-select>
                <label for="rol">Rol de Usuario</label>
              </p-float-label>

              @if(formularioRegistro.get('rol')?.invalid && formularioRegistro.get('rol')?.touched) {
                <div class="pt-2">
                  @if(formularioRegistro.get('rol')?.errors?.['required']) {
                    <p-message severity="error" icon="pi pi-exclamation-triangle">
                      Debes seleccionar un rol
                    </p-message>
                  }
                </div>
              }
            </div>

            <!-- Botón de registro -->
            <p-button
              label="Crear Cuenta"
              icon="pi pi-user-plus"
              [disabled]="estaCargando || formularioRegistro.invalid"
              class="w-full flex items-center justify-center"
              type="submit"
            >
            </p-button>

            <!-- Link para login -->
            <div class="text-center pt-4">
              <p class="text-gray-600">
                ¿Ya tienes una cuenta?
                <a routerLink="/login" class="text-blue-600 hover:text-blue-800 font-medium ml-1">
                  Inicia sesión aquí
                </a>
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


<app-spinnercomponent [estaCargando]="estaCargando" />

